////  ExtresViewController.m//  Expresso////  Created by Arol Viñolas Martinez on 09/12/10.//  Copyright 2010 FIB (UPC). All rights reserved.//#import "ExtresViewController.h"@implementation ExtresViewController@synthesize extres;-(IBAction) fet {	[self dismissModalViewControllerAnimated:YES];}// The designated initializer.  Override if you create the controller programmatically and want to perform customization that is not appropriate for viewDidLoad.- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];    if (self) {        // Custom initialization.				appDelegate = (ExpressoAppDelegate*)[[UIApplication sharedApplication] delegate];		[appDelegate setExtres:[[NSMutableDictionary alloc] init]];		extres = [[[appDelegate carta] objectForKey:@"carta"] objectForKey:@"extres"];				f = [[NSNumberFormatter alloc] init];		[f setNumberStyle:NSNumberFormatterDecimalStyle];		[f setMaximumFractionDigits:2];		[f setMinimumFractionDigits:2];		//[f setCurrencySymbol:@"€ "];    }    return self;}// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.- (void)viewDidLoad {	[extresTableView setBackgroundColor:[UIColor clearColor]];	    [super viewDidLoad];}/*// Override to allow orientations other than the default portrait orientation.- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {    // Return YES for supported orientations.    return (interfaceOrientation == UIInterfaceOrientationPortrait);}*/- (void)didReceiveMemoryWarning {    // Releases the view if it doesn't have a superview.    [super didReceiveMemoryWarning];        // Release any cached data, images, etc. that aren't in use.}- (void)viewDidUnload {    [super viewDidUnload];    // Release any retained subviews of the main view.    // e.g. self.myOutlet = nil;}- (void)dealloc {    [super dealloc];}#pragma mark -#pragma mark UITableViewDelegate operations-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {	//ExpressoAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];	NSString *nameAtIndexPath = [[extres objectAtIndex:[indexPath row]] valueForKey:@"nom"];		UITableViewCell *cell = [[[UITableViewCell alloc] 							  initWithStyle:UITableViewCellStyleSubtitle 							  reuseIdentifier:nameAtIndexPath] autorelease];		//NSString *path = [[NSBundle mainBundle] pathForResource:@"cafe" ofType:@"png"];	//UIImage *theImage = [UIImage imageWithContentsOfFile:path];		cell.textLabel.text = nameAtIndexPath;	cell.textLabel.backgroundColor = [UIColor clearColor];	cell.textLabel.textColor = [UIColor whiteColor];	cell.textLabel.shadowColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.3];	cell.textLabel.shadowOffset = CGSizeMake(0, -1);	//cell.imageView.image = theImage;		cell.detailTextLabel.text = [NSString stringWithFormat:@"%@ €", 								 [f stringFromNumber:								  [f numberFromString:[[extres objectAtIndex:[indexPath row]] 													   valueForKey:@"preu"]]]];		[cell setAccessoryType:UITableViewCellAccessoryNone];		[cell setSelectionStyle:UITableViewCellSelectionStyleNone];		UIImage *image = [[UIImage imageNamed:@"tableViewMiddle.png"] retain];		UIImageView *imageView = [[UIImageView alloc] initWithImage:image];	imageView.image = image;	imageView.opaque = YES;	//cell.backgroundView = imageView;	[imageView release];		return cell;}-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {	return [extres count];	}-(NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{	return @"Extres";}/*- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{	// create the parent view that will hold header Label	UIView* customView = [[UIView alloc] initWithFrame:CGRectMake(10.0, 0.0, 300.0, 44.0)];		// create the button object	UILabel * headerLabel = [[UILabel alloc] initWithFrame:CGRectZero];	headerLabel.backgroundColor = [UIColor clearColor];	headerLabel.opaque = NO;	headerLabel.textColor = [UIColor colorWithRed:0.28 green:0.41 blue:0.32 alpha:1];	headerLabel.highlightedTextColor = [UIColor whiteColor];	headerLabel.font = [UIFont boldSystemFontOfSize:17];	headerLabel.frame = CGRectMake(20.0, 0.0, 300.0, 44.0);		// If you want to align the header text as centered	// headerLabel.frame = CGRectMake(150.0, 0.0, 300.0, 44.0);		headerLabel.text = [producte valueForKey:@"nom"]; // i.e. array element		headerLabel.shadowColor = [UIColor colorWithRed:1 green:1 blue:1 alpha:0.5];	[customView addSubview:headerLabel];		return customView;}*//*- (CGFloat) tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{	return 44.0;}*/-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {	UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];	NSLog(@"%@", cell.textLabel.text);	if (cell.accessoryType == UITableViewCellAccessoryNone) {		[cell setAccessoryType:UITableViewCellAccessoryCheckmark];		[[appDelegate extres] setValue:[[extres objectAtIndex:[indexPath row]] valueForKey:@"preu"] 								forKey:cell.textLabel.text];	}else {		[cell setAccessoryType:UITableViewCellAccessoryNone];		[[appDelegate extres] removeObjectForKey:cell.textLabel.text];	}	NSLog(@"%@", [appDelegate extres]);}@end